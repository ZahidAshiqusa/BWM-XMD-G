<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Neon Startup (Password Protected)</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  /* basic reset */
  html,body{height:100%;margin:0;background:#000;font-family:Poppins,Arial,Helvetica,sans-serif;color:#fff}
  .center{height:100%;display:flex;align-items:center;justify-content:center}

  /* wrapper */
  .wrapper{text-align:center}
  .logo{width:110px;height:110px;border-radius:50%;border:3px solid #0ff;box-shadow:0 0 20px #0ff;margin:0 auto 12px;background:#111 center/cover no-repeat}
  .title{font-size:32px;margin-bottom:20px;text-shadow:0 0 10px #0ff}

  /* neon buttons (pill) */
  .neon-btn{display:flex;align-items:center;justify-content:center;gap:12px;margin:12px auto;width:260px;padding:14px 28px;font-size:20px;border-radius:40px;text-decoration:none;color:#fff;font-weight:600;position:relative;overflow:hidden;transition:.3s}
  .neon-btn i{font-size:22px;animation:floatIcon 2s infinite ease-in-out}
  @keyframes floatIcon{0%{transform:translateY(0)}50%{transform:translateY(-4px)}100%{transform:translateY(0)}}
  .neon-btn:hover{transform:scale(1.06);filter:brightness(1.05)}

  /* colored glows -- set with inline style --clr */
  .neon-btn{box-shadow:0 0 8px rgba(255,255,255,0.02);}
  .neon-btn[data-clr] { --clr:var(--clr, #0ff); }
  .neon-btn[data-clr]::before{content:'';position:absolute;inset:0;background:linear-gradient(90deg,var(--clr),transparent);opacity:.06}
  .neon-btn[data-clr]{box-shadow:0 0 12px var(--clr), inset 0 0 8px var(--clr)}
  .neon-btn:hover{background:var(--clr);color:#000}

  /* password modal */
  .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:9999}
  .modal{background:linear-gradient(135deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));padding:28px;border-radius:12px;min-width:320px;max-width:420px;box-shadow:0 10px 40px rgba(0,0,0,0.7);border:1px solid rgba(255,255,255,0.04)}
  .modal h3{margin:0 0 12px;font-size:20px}
  .modal input[type=password]{width:100%;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.02);color:#fff;margin-bottom:12px}
  .modal .row{display:flex;gap:8px}
  .modal button{flex:1;padding:10px;border-radius:8px;border:none;font-weight:600}
  .error{color:#ff6b6b;font-size:13px;margin-top:8px}

  /* small responsive tweaks */
  @media (max-width:420px){.neon-btn{width:85%}}
</style>
</head>
<body>
<div class="center">
  <div class="wrapper">
    <div class="logo" id="logo"></div>
    <div class="title">SkillMedic</div>

    <a href="LINK1" class="neon-btn" data-clr style="--clr:#0ff;"><i class="fa-solid fa-user"></i> Student Portal</a>
    <a href="LINK2" class="neon-btn" data-clr style="--clr:#f0f;"><i class="fa-solid fa-chalkboard-user"></i> Teacher Portal</a>
    <a href="LINK3" class="neon-btn" data-clr style="--clr:#ff0;"><i class="fa-solid fa-stethoscope"></i> Doctor Portal</a>
    <a href="LINK4" class="neon-btn" data-clr style="--clr:#0f0;"><i class="fa-solid fa-gear"></i> Admin Panel</a>
  </div>
</div>

<!-- Password modal (hidden when validated) -->
<div id="pwModal" class="modal-backdrop" style="display:none">
  <div class="modal">
    <h3>Enter Startup Password</h3>
    <input id="pwInput" type="password" placeholder="Startup password" autocomplete="off" />
    <div class="row">
      <button id="pwSubmit">Unlock</button>
      <button id="pwCancel">Change Logo</button>
    </div>
    <div id="pwError" class="error" style="display:none"></div>
  </div>
</div>

<script>
  // --- Config ---
  const modal = document.getElementById('pwModal');
  const input = document.getElementById('pwInput');
  const submitBtn = document.getElementById('pwSubmit');
  const cancelBtn = document.getElementById('pwCancel');
  const errEl = document.getElementById('pwError');
  const SESSION_KEY = 'startup_unlocked_v1';

  // Show modal if not unlocked in sessionStorage
  function isUnlocked() { return sessionStorage.getItem(SESSION_KEY) === '1'; }
  function showModal() { modal.style.display = 'flex'; input.focus(); }
  function hideModal() { modal.style.display = 'none'; errEl.style.display = 'none'; input.value = ''; }

  // Fetch to serverless API
  async function checkPassword(password) {
    try {
      const res = await fetch('/api/check-password', {
        method: 'POST',
        headers: { 'Content-Type':'application/json' },
        body: JSON.stringify({ password })
      });
      return await res.json();
    } catch (e) {
      return { ok: false, error: 'Network error' };
    }
  }

  // Startup logic
  (function init(){
    if (isUnlocked()) {
      hideModal();
      return;
    }
    showModal();
  })();

  submitBtn.addEventListener('click', async ()=>{
    const pw = input.value.trim();
    if (!pw) { errEl.textContent = 'Enter the password'; errEl.style.display = 'block'; return; }

    submitBtn.disabled = true; errEl.style.display='none';
    const result = await checkPassword(pw);
    submitBtn.disabled = false;

    if (result && result.ok) {
      sessionStorage.setItem(SESSION_KEY,'1');
      hideModal();
    } else {
      errEl.textContent = result && result.error ? result.error : 'Wrong password';
      errEl.style.display = 'block';
    }
  });

  // cancelBtn: example action to change logo (just demonstration)
  cancelBtn.addEventListener('click', ()=>{
    const logo = document.getElementById('logo');
    const url = prompt('Enter logo URL (or leave blank):');
    if (url) logo.style.backgroundImage = `url(${url})`;
  });

  // Allow Enter key
  input.addEventListener('keydown', (e)=>{ if (e.key === 'Enter') submitBtn.click(); });
</script>
</body>
</html>
